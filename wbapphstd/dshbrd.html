<!doctype HTML>
<head>

		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<title> InTru | Innovation... that's TRUE. </title>
		<script src="Script/jquery.min.js"></script>
		<link rel="stylesheet" href="Style/bootstrap.min.css">
		<link rel="manifest" href="manifest.json">
		<link rel="icon" type="image/png" href="Images/app-logo-box.png"/>
		<script src="https://www.gstatic.com/firebasejs/5.5.5/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/5.5.5/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/5.5.5/firebase-firestore.js"></script>
		<script src="dshbrd.js"></script>
		<link rel="apple-touch-icon-precomposed" href="Images/app-logo-box.png"/>
		<link rel="icon" href="Images/app-logo-box.png"/>
		<meta name="msapplication-TileImage" content="Images/app-logo-box.png" content="icon-uri=wbapphstd/Images/app-logo-box.png" />
	<script>
	$("body").hide();
	</script>


	
		<style>
	body, html{
//	background-image:linear-gradient( to bottom , white) !important;
	background-repeat:no-repeat !important;
	bacground-position:center !important;
	bacground-size:cover !important;
	height:100% !important;
	width:100%;
	}
/*
@media screen and (min-width:380px){
	.twin-div{
	margin-left:5px;
	}
	}
@media screen and (min-width:480px){
	.twin-div{
	margin-left:30px;
	}
	}
@media screen and (min-width:580px){
	.twin-div{
	margin-left:60px;
	}
	}
@media screen and (min-width:680px){
	.twin-div{
	margin-left:120px;
	}
	}
@media screen and (min-width:880px){
	.twin-div{
	margin-left:180px;
	}
	}
@media screen and (min-width:1024px){
	.twin-div{
	margin-left:320px;
	}
	}
@media screen and (min-width:1280px){
	.twin-div{
	margin-left:520px;
	}
	}
*/
	.pnl-cls-btn{
	right:5px;
	position:absolute;
	font-size:50px;
	margin-top:15px !important;
	line-height:10px !important;
	}
	.icn-txt{
	float:left;
	margin-left:10px;
	}
	.all-div{
	display:inline;
	text-align:center;
	}
	.frm{
	margin-left:0.85rem;
	background:white;
	width:90%;
	color:black;
	margin-top:50px;
	max-width:600px;
	}
	.logo{
	width:100px;
	max-width:120pt;
	}
	
	/* Floating label */
	/* @media screen and  (max-width:1024px){
	.logo-a{
	display:none !important;
	}
	} */ 
	.btn-sgnout ,  .delete-usr-btn{
	cursor:pointer;
	padding:0.5rem !important;
	border:2px solid;
	border-color: rgb(255,51,102) !important;
	font-size:16px;
	color:rgb(255,50,90);
	background-color:white;
	max-width:400px;
	margin:0px !important;
	width:90%;
	float:left;
	margin-left:20px !important;
	text-align:center;
	overflow:hidden;
	font-weight:600;
	transition:all 0.2s ease;
	}
	.btn-sgnout:hover , .delete-usr-btn:hover{
	box-shadow:0 0 3px 3px #888;
	-moz-shadow:0 0 3px 3px #888;
	-ms-shadow:0 0 3px 3px #888;
	-webkit-shadow:0 0 3px 3px #888;
	}
	.panelDiv{
	position:absolute;
	top:-2500px;
	background-color:white;
	height:100% !important;
	margin-top:0px !important;
	width:100%;
	z-index:1;
	border-right:1px grey solid;
	transition: all 0.3s ease;
	}
	.topdiv{
	margin: 0px !important;
	background-image: url( "Images/app-background-div-style.png ");
	color:white;
	background-repeat:no-repeat;
	width:100% !important;
	padding-left:5px;
	overflow:hidden;
	height:auto !important;
	font-size:15px;
	background-size:cover;
	}
	.profilePhoto{
	left:10px;
	width:40px;
	height:40px;
	margin-top:10px !important; 
	border-radius:50%;
	border:1px solid black;
	}
	.heading{
	font-size:28pt;
	}
	.pnl-btn{
	font-size:22pt;
	padding-top:0 !important;
	margin-top:0 !important;
	}
	.emlfld{
	right:5px;
	top:15px;
	position:absolute;
	z-index:0;
	}
	.toWhatstru-ai , .toMoney{
	cursor:pointer !important;	
	}
	.menuLinks{
	text-decoration:underline;
	padding-left:20px;
	pointer:cursor;
	font-size:20px;
	}
	.finish-img{
	position:absolute;
	top:100px !important;
	height:auto !important;
	float:left;
	overflow:hidden;
	max-height:90px !important;
	z-index:-1;
	}
	</style>


</head>

<body onload='checkCookie()'>
<center>

	<div class="ldng" > <br/><br/>
	
		<img src="Images\app-logo-box.png"> <br/><br/>
		<div style="text-align:center;height:8px;width:80% !important; max-width:400px;background-color:rgb(255,52,102);"></div> <br/><br/>
		<font size="4px"> Loading... &nbsp;&nbsp;&nbsp;Please Wait.</font>

	</div>

</center>


<div class="rest-div">

	<input type='hidden' value=' ' class='X67avB2'>
	<img class='finish-img' src= "Images/app-background-div-style.png " width = 100%>	
	<div class="panelDiv">

		<span class="pnl-cls-btn"> &times; </span> 

		<img class='profilePhoto' src='#'>
		
		<div class='menuLinks'>
			<span class='toMoney' onclick="javscript:window.location.href='money.html'"> Money </span> <br/>
			<span class='toWhatstru-ai' onclick="javscript:window.location.href='whatstru-ai/index.html'">  WhatsTru.AI </span> <br/>	
		</div>
	<br/>	<input type="button" class="btn-sgnout" id="btn-sgn" value="Logout"> <br/><br/>
		<input type="button" class="delete-usr-btn" value="Delete Account"> <br/><br/>

	</div>



	<div class="topdiv">
		<span class="pnl-btn"> &equiv; </span> <br/>
			<span class='heading'> Dashboard </span><br/>
			<span class="emlfld"></span>
			<span class='extraSpace'></span>
	</div>

<br/><br/><br/>
<center>
	<div class="lgn-div twin-div">
		
		<div class="frm"><br/>
			<h3>
			 Hello, <span class='namefld'></span>!
			</h3>
			This is the dashboard page.<br/><br/>
			Since, this is a beta project it will undergo changes very soon! Click once again after March 31, 2019.<br/>
			<br/><br/>
			<br/><br/>
	
		</div>
	</div>
</center>
</div>
	<script>
		$(document).ready(function (){
			$(".rest-div").hide();
			
			$('.pnl-btn').click( function() {
				$('.panelDiv').css('top','0px');
			})
			$('.pnl-cls-btn').click( function() {
				$('.panelDiv').css('top','-2500px');
			})

			if($(window).width() < 470){
 			 	$('.extraSpace').html("<br/>");
				$('.topdiv').css('background','rgb(255,51,102)');
				$('.topdiv').css('background-image','none');
			}else{
				$('.extraSpace').html('<br/>');
				$('.topdiv').css('background','rgb(255,51,102)');
				$('.topdiv').css('background-image','none');
			}

			$(".ldng").show().delay(1500).fadeOut(500);
			
			$(".rest-div").delay(2000).fadeIn();
			$(".btn-sgnout").click(function(){
				firebase.auth().signOut().then(function() {
				  // Sign-out successful.
				window.location.href="index.html";
				}).catch(function(error) {
					  alert(error);
				})
			})			
		});

	</script>
	
	<script>
		function getUserDetails(user){
			var name, email, photoUrl, uid, emailVerified;
			name = user.displayName;
			email = user.email;
			photoUrl = user.photoURL;
			emailVerified = user.emailVerified;
			uid = user.uid;
			$(document).ready(function(){
			$(".X67avB2").val(uid);
			 $(".emlfld").html(email);
			$(".namefld").html(name);
			
			//Create doc for the user if the doc does not exists
			var userRef = db.collection('Accounts').doc(uid);
			userRef.get().then(doc => {
			        if (!doc.exists) {
			            userRef.set({
				name: ' ',
				email: email,
				})
				db.collection("Accounts")
				.doc(uid)
				.collection('intru-money')
				.doc()
				.set({
    			name: "opening",
    			cost:0,
				date:new Date()
				})
			        }
			    })
			    .catch(err => {
			        console.log('Error getting document', err);
			    })


		$('.delete-usr-btn').click( function() {
				user.delete().then(function() {
					alert("Successfully Deleted User");  // User deleted.
					db.collection("users").doc(uid).update({
    					"name": "deleted user"
					})
					.then(function() {
    					console.log("Document successfully updated!");
					})

				}).catch(function(error) {
					alert(error)  // An error happened.
				})
			})
		})
		}

	</script>
</body>
</html>
		
